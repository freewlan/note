## 主流消息队列Github情况
| 对比项| star | 贡献者| 最新稳定版发布时间 | 
| ------ | ------ | ------ | ------|
| Kafka | 11.8K | 535 | 3月23 |
| RabbitMQ | 5.5K | 79 |3月29 |
| ActiveMQ | 1.4K | 74 | 3月15 |
| RocketMQ | 7.6K | 141 |3月29 |


## 选型条件
* 社区活跃、应用广泛
* 易于拓展、运维
* 有易用的管理后台
* 支持PHP

RocketMQ性能优异，但对PHP支持不友好。ActiveMQ应用范围、受欢迎程度不如其他几个，所以主要对比Kafka和RabbitMQ

以下是主要特点对比。

## 性能
| 对比项| Kafka | RabbitMQ|
| ------ | ------ | ------ |
| QPS | 10万级别 | 万级别|
| 多副本集单机吞吐性能 | 下降一般 | 相比Kafka下降较多|


## 功能对比
| 功能 | Kafka | RabbitMQ|
| ------ | ------ | ------ |
| 优先级队列 | 不支持| 支持 |
| 延迟队列 | 不支持 | 支持 |
| 死信队列 | 不支持 | 支持 |
| 重试队列 | 不支持 | 不支持 |
| 广播消费 | 支持完善 | 支持，但不完善 |
| 消息回溯 | 支持 | 不支持 |
| 消息堆积 | 支持 | 支持 |
| 持久化 | 支持 | 支持 |
| 消息追踪 | 不支持 | 支持 |
| 消息过滤 | 客户端级别的支持 | 不支持 |
| 多租户 | 不支持 | 支持 |
| 多协议支持 | 只支持定义协议，主流版本存在兼容问题 | 支持 |
| 跨语言支持 | 支持 | 支持 |
| 流量控制 | 支持clint和user级别，通过主动设置，可将流控作用于生产者或消费者 | 基于Credit-Based算法，是内部被触动的保护机制，作用于生产者层面 |
| 消息顺序性 | 支持单分区（partition）级别的顺序 | 支持的条件比较苛刻，需要单线程发送、消费并且不采用延迟队列、优先级队列等一些高级功能，从某种意义上来说，不算支持 |
| 安全机制 | （TLS/SSL、SASL）身份认证和（读写）权限控制 | 与Kafka类似 |
| 消息幂等性 | 支持单个生产者单分区单会话的幂等性 | 不支持 |
| 事务性消息 | 支持 | 支持 |


## 可扩展性
|对比项 | Kafka | RabbitMQ |
| ------ | ------ | ------ |
| 水平拓展| 支持 | 支持 |
| 动态拓展 | 支持 | 不支持 |
| 生产者负载均衡 | 支持，通过分区和副本平均分布在各节点上实现 | 支持，软件由第三方提供，如LVS |
| 消费者负载均衡 | 支持，基于zookeeper和组管理节点、消费者的动态加入于离开，出发负载均衡 | 同上|

## 可靠性
|对比项 | Kafka | RabbitMQ |
| ------ | ------ | ------ |
| 节点故障集群可用| 支持（基于分布式架构） | 支持（基于镜像队列） |
| 节点故障数据可用| 支持（基于消息持久化和消息副本） | 支持（基于消息副本和可选消息持久化） |
| 消息确认机制 | 支持 | 支持（基于发送者和消费者的消息确认机制） |
| 事务 | 支持 | 支持 |

## 参考文章
[消息中间件选型分析：从 Kafka 与 RabbitMQ 的对比看全局](https://www.infoq.cn/article/kafka-vs-rabbitmq)

[开源软件成熟度评测报告-分布式消息中间件](https://blog.csdn.net/yssycz/article/details/80133084)